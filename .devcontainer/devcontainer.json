{
  "name": "MariaDB DevContainer Template",
  "build": { "dockerfile": "Dockerfile" },
  "remoteUser": "vscode",
  "workspaceFolder": "/workspace",
  "forwardPorts": [3306],
  "postStartCommand": "sudo service mariadb start && echo '⏳ Waiting for MariaDB socket...' && for i in {1..15}; do if [ -S /run/mysqld/mysqld.sock ]; then echo '✅ MariaDB is ready'; break; fi; sleep 1; done && sudo mariadb -e \"CREATE DATABASE IF NOT EXISTS mydatabase; CREATE USER IF NOT EXISTS 'vscode'@'%' IDENTIFIED BY ''; GRANT ALL PRIVILEGES ON mydatabase.* TO 'vscode'@'%'; FLUSH PRIVILEGES;\" && python3 .devcontainer/create_db.py || echo '⚠️ Python script failed, continuing...' && cd /workspace && (git rev-parse --is-inside-work-tree 2>/dev/null || git init) && git branch -M main && git add . && git commit -m 'Auto commit on container start' || echo 'No changes to commit'",
  "extensions": ["ms-python.python"]
}
